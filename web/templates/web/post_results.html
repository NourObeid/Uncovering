{% extends 'web/base.html' %}{% load staticfiles %}
{% block title %}Demo{% endblock %}

{% block content %}
<style>
#map_wrapper {
    height: 400px;
}

#map_canvas {
    width: 100%;
    height: 100%;
}
table {
    width:100%;
}
table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
}
th, td {
    padding: 5px;
    text-align: left;
}
table#t01 tr:nth-child(even) {
    background-color: #eee;
}
table#t01 tr:nth-child(odd) {
   background-color:#fff;
}
table#t01 th {
    background-color: black;
    color: white;
}
</style>
<div class="post">
    {% if post.published_date %}
    <div class="date">
        {{ post.published_date }}
    </div>
    {% endif %}
    <a href="{% url 'post_new' %}" class="top-menu"><span class="glyphicon glyphicon-plus"></span></a>

    <div class="post" style="background-color:powderblue;">
        <p>{{ post.text|linebreaksbr }}</p>

    </div>
    <div class="sentences" >
        <div class="table" >
        <table id="t01">
            <tr>
                <th>Name</th>
                <th>Sentence</th>
            </tr>
         {% for sentence in sentences %}

            <tr>
                <td>{{ sentence.0 }}</td>
                <td>{{ sentence.1 }}</td>



            </tr>
            {% endfor %}

        </table>
    </div>


    </div>
    <div class="table" id="t02">
        <table>
            <tr>
                <th>Place</th>
                <th>Occurence</th>
                <th>Relevance score</th>
                <th>Confidence score</th>
                <th>Wikidata ID</th>
                <th>Wikipedia link</th>
            </tr>
            {% for result in results %}

            <tr>
                <td>{{ result.0 }}</td>
                <td>{{ result.1 }}</td>
                <td>{{ result.2 }}</td>
                <td>{{ result.3 }}</td>
                <td>{{ result.4 }}</td>
                <td><a href={{ result.5 }}> {{result.5}}</a></td>


            </tr>
            {% endfor %}

        </table>
    </div>

       <h3>My Google Maps Demo</h3>
<div id="map_wrapper">
    <div id="map_canvas" class="mapping"></div>
</div>


    <script type="text/javascript">
    jQuery(function($) {
    // Asynchronously Load the map API
    var script = document.createElement('script');
    script.src = "//maps.googleapis.com/maps/api/js?sensor=false&callback=initialize";
    document.body.appendChild(script);
});

function initialize() {
    var map;
    var bounds = new google.maps.LatLngBounds();
    var mapOptions = {
        mapTypeId: 'roadmap'
    };

    // Display a map on the page
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    map.setTilt(45);



    // Display multiple markers on a map
    var infoWindow = new google.maps.InfoWindow(), marker, i;

    // Loop through our array of markers & place each one on the map
                 {% for coordinate in coordinates %}
        var position = new google.maps.LatLng({{coordinate.1}}, {{coordinate.2}});
        bounds.extend(position);
        marker = new google.maps.Marker({
            position: position,
            map: map,
        });


        // Automatically center the map fitting all markers on the screen
        map.fitBounds(bounds);
            {% endfor %}
    // Override our map zoom level once our fitBounds function runs (Make sure it only runs once)
    var boundsListener = google.maps.event.addListener((map), 'bounds_changed', function(event) {
        this.setZoom(14);
        google.maps.event.removeListener(boundsListener);
    });

}
  </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAEUeH5mDNsTQO3OPor0XUq9ConykXpU_c&callback=initMap&region=GB">
    </script>
</div>
{% endblock %}